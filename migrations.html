---
layout: api
title: Migrations
permalink: /migrations/
---

<h1>Engineer Migrations</h1>

<hr>

<h2>About Migrations</h2>

<p>Engineer uses <strong>migrations</strong> to track configuration changes made to SharePoint. You can use migrations to create a queue of tasks that are executed in order on any number of target environments. Think of migrations like source control for your configuration operations.</p>

<h3>Creating Migrations</h3>

<p>Use the <code><a href="{{ site.baseurl }}{% link _commands/make.html %}">make</a></code> command to create new migration files. Once created, you can use Engineer&rsquo;s migration API to create fields, content types, lists, views, and more.</p>

<h3>Using the Migration API</h3>

<p>Migration files are JavaScript files that consist of an <code>up</code> and <code>down</code> method. Code in the <code>up</code> method will be executed during <code><a href="{{ site.baseurl }}{% link _commands/migrate.html %}">migrate</a></code> operations. Code in the <code>down</code> method will be executed during <code><a href="{{ site.baseurl }}{% link _commands/rollback.html %}">rollback</a></code> operations. This allows you to define a queue of tasks that are executed during both deployment and retraction of each migration.</p>

<p>Each of these methods passes a single parameter called <code>engineer</code> through to your migration logic. You can use this <code>engineer</code> object to access the migration API.</p>

{% highlight js %}
up(engineer) {
  // Use the Lists API to add a new list
  engineer.web.lists.add('My List');

  // Use the Fields API to add a new field
  engineer.web.fields.add('My New Field');

  // Use the List and Fields API to add a new field to a list
  engineer.web.lists.getByTitle('My List').fields.add('My New Field 2');
}
{% endhighlight %}

<p>The same API is accessed in both the <code>up</code> and <code>down</code> methods. There are a variety of API endpoints, options, and configurations you can use to do just about anything within your SharePoint environments. Refer to the individual API documentation for more information on how to use each endpoint.</p>

<h3>The Migration Queue</h3>

<p>Migration operations are executed in queue, with tasks being performed one at a time in the order they appear within the file. Traditional worries concerning ansynchronous JavaScript state management do not apply, as this is all sorted out in the internal Engineer API queue logic.</p>
